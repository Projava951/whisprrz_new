{header}

<div class="content-header row">
	<div class="content-header-left col-md-4 col-12 mb-2">
		<h3 class="content-header-title">{l_title_current}</h3>
	</div>
	<div class="content-header-right col-md-8 col-12">
		<div class="breadcrumbs-top float-md-right">
			<div class="breadcrumb-wrapper mr-1">
				<ol class="breadcrumb">
					<li class="breadcrumb-item">
						<a href="{url_main}administration/partner.php">{l_menu_partners}</a>
					</li>
					<li class="breadcrumb-item active">
						{l_title_current}
					</li>
				</ol>
			</div>
		</div>
	</div>
</div>

{menu_page}

<script>
    function confirmCheckPayee() {
      message = new String("{l_your_checks}: %1. {l_once_set}");
      message = message.replace('%1', document.JoinForm.name.value);
      if (!confirm(message)) {
        return false;
      }
      return true;
    }
      function onValidateJoinForm() {
        var form = document.forms['JoinForm'];
        // "name" field validation.
        if (!validateRequiredField(form['name'], '{l_name}')) {
          removeSubmissionBlock();
          return false;
        }
        // "name" field validation.
        if (!validateMaxLength(form['name'], '{l_name}','100')) {
          removeSubmissionBlock();
          return false;
        }
        // "referring_domains" field validation.
        if (!validateRequiredField(form['referring_domains'], '{l_referring_domains}')) {
          removeSubmissionBlock();
          return false;
        }
        // "referring_domains" field validation.
        if (!validateMaxLength(form['referring_domains'], '{l_referring_domains}','2000')) {
          removeSubmissionBlock();
          return false;
        }
        // "referring_domains" field validation.
        if (!validateMultipleDomainField(form['referring_domains'], '{l_referring_domains}', '2147483647')) {
          removeSubmissionBlock();
          return false;
        }
        // "contact_name" field validation.
        if (!validateRequiredField(form['contact_name'], '{l_name}')) {
          removeSubmissionBlock();
          return false;
        }
        // "contact_name" field validation.
        if (!validateMaxLength(form['contact_name'], '{l_name}','200')) {
          removeSubmissionBlock();
          return false;
        }
        // "phone" field validation.
        if (!validateRequiredField(form['phone'], '{l_phone_number}')) {
          removeSubmissionBlock();
          return false;
        }
        // "phone" field validation.
        if (!validateMaxLength(form['phone'], '{l_phone_number}','15')) {
          removeSubmissionBlock();
          return false;
        }
        // "phone" field validation.
        if (!validateNumericWS(form['phone'], '{l_phone_number}')) {
          removeSubmissionBlock();
          return false;
        }
        // "email" field validation.
        if (!validateRequiredField(form['email'], '{l_email_address}')) {
          removeSubmissionBlock();
          return false;
        }
        // "email" field validation.
        if (!validateMaxLength(form['email'], '{l_email_address}','100')) {
          removeSubmissionBlock();
          return false;
        }
        // "email" field validation.
        if (!validateEmailField(form['email'], '{l_email_address}')) {
          removeSubmissionBlock();
          return false;
        }
        // "addr1" field validation.
        if (!validateRequiredField(form['addr1'], '{l_billing_address}')) {
          removeSubmissionBlock();
          return false;
        }
        // "addr1" field validation.
        if (!validateMinLength(form['addr1'], '{l_billing_address}','2')) {
          removeSubmissionBlock();
          return false;
        }
        // "addr1" field validation.
        if (!validateMaxLength(form['addr1'], '{l_billing_address}','50')) {
          removeSubmissionBlock();
          return false;
        }
        // "addr1" field validation.
        if (!validateRequiredField(form['addr1'], '{l_billing_address}')) {
          removeSubmissionBlock();
          return false;
        }
        // "country" field validation.
        if (!validateRequiredSelect(form['country'],'{l_country}','-1')) {
          removeSubmissionBlock();
          return false;
        }
        // "country" field validation.
        if (!validateRequiredField(form['country'], '{l_country}')) {
          removeSubmissionBlock();
          return false;
        }
        // "state" field validation.
        if (!validateRequiredSelect(form['state'],'{l_state_province}','-1')) {
          removeSubmissionBlock();
          return false;
        }
        // "state" field validation.
        if (!validateRequiredField(form['state'], '{l_state_province}')) {
          removeSubmissionBlock();
          return false;
        }
        // "city" field validation.
        if (!validateRequiredSelect(form['city'],'{l_city}','-1')) {
          removeSubmissionBlock();
          return false;
        }
        // "city" field validation.
        if (!validateRequiredField(form['city'], '{l_city}')) {
          removeSubmissionBlock();
          return false;
        }
        // "zip" field validation.
        if (!validateMaxLength(form['zip'], '{l_zip_code}','10')) {
          removeSubmissionBlock();
          return false;
        }

        // "tax field validation"
        if (!validateMaxLength(form['tax'], '{l_tax_id}','10')) {
            removeSubmissionBlock();
            return false;
        }

        if(!isEmpty(form['join_password'])) {
            // "join_password" field validation.
            if (!validateRequiredField(form['join_password'], '{l_password}')) {
              removeSubmissionBlock();
              return false;
            }
            // "join_password" field validation.
            if (!validateMinLength(form['join_password'], '{l_password}','4')) {
              removeSubmissionBlock();
              return false;
            }
            // "join_password" field validation.
            if (!validateMaxLength(form['join_password'], '{l_password}','30')) {
              removeSubmissionBlock();
              return false;
            }
            // "join_password" field validation.
            if (!validateAlphaNumeric(form['join_password'], '{l_password}')) {
              removeSubmissionBlock();
              return false;
            }
            // "join_password" field validation.
            if (!validateTwoFields(form['join_password'],'{l_password}',form['verify_password'],'{l_verify_password}')) {
              removeSubmissionBlock();
              return false;
            }
        }

        return true;
      }

      function validateJoinForm() {
        blockSubmission = true;
         if (typeof beforeJoinFormValidation != 'undefined') {
          beforeJoinFormValidation();
        }
        var validated = onValidateJoinForm();
        if (validated && (typeof uponSuccessfulJoinFormValidation != 'undefined')) {
          validated = uponSuccessfulJoinFormValidation();
        }
        else if (!validated && (typeof uponUnsuccessfulJoinFormValidation != 'undefined')) {
          uponUnsuccessfulJoinFormValidation();
        }
        if (!validated) {
          removeSubmissionBlock();
        }
        return validated;
      }

      function submitJoinForm() {
       if (validateJoinForm()) document.JoinForm.submit();
        }
</script>

<div class="content-body">

	<div class="alert alert-success border-0 alert-dismissible mb-2-1" role="alert">{l_changes_save}</div>
	<div class="alert alert-danger alert-dismissible mb-2-1" role="alert">{message}</div>

	<div class="row">
		<div class="col-12">
			<div class="card">
				<div class="card-header">
					<h4 class="card-title">{l_title_current}</h4>
                    <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                    <div class="heading-elements">
                        <ul class="list-inline mb-0">
                            <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                        </ul>
                    </div>
				</div>
				<div class="card-content collapse show">
					<div class="card-body">

						<form name="JoinForm" method="POST" action="{url_main}administration/partner_edit.php?cmd=edit&id={partner_id}" onSubmit="return validateJoinForm();">

						<fieldset class="form-group">
							<label>{l_company_name}:</label>
							<input class="form-control" type="text" name="name" value="{company}"/>
						</fieldset>
						<div class="row">
							<fieldset class="form-group col-md-6">
								<label>{l_referring_domains}:</label>
								<input class="form-control" type="text" name="referring_domains" value="{domain}"/>
							</fieldset>
							<fieldset class="form-group col-md-6">
								<label>{l_name}:</label>
								<input class="form-control" type="text" name="contact_name" value="{real_name}"/>
							</fieldset>
						</div>
						<div class="row">
							<fieldset class="form-group col-md-6">
								<label>{l_phone}:</label>
								<input class="form-control" type="text" name="phone" value="{phone}"/>
							</fieldset>
							<fieldset class="form-group col-md-6">
								<label>{l_email}:</label>
								<input class="form-control" type="text" name="email" value="{mail}"/>
							</fieldset>
						</div>
						<div class="row">
							<fieldset class="form-group col-md-6">
								<label>{l_address_1}:</label>
								<input class="form-control" type="text" name="addr1" value="{adress}"/>
							</fieldset>
							<fieldset class="form-group col-md-6">
								<label>{l_address_2}:</label>
								<input class="form-control" type="text" name="addr2" value="{adress2}"/>
							</fieldset>
						</div>
						<div class="row">
							<fieldset class="form-group col-md-6">
								<label>{l_country}:</label>
								<select name="country" class="form-control" onChange="submitForm(document.JoinForm, '{url_main}administration/partner_edit.php?id={partner_id}&focusField=state&focusForm=JoinForm')">
								{country_options}
								</select>
							</fieldset>
							<fieldset class="form-group col-md-6">
								<label>{l_state_province}:</label>
								<select name="state" class="form-control" onChange="submitForm(document.JoinForm, '{url_main}administration/partner_edit.php?id={partner_id}&focusField=city&focusForm=JoinForm')">
								<option>{l_please_select}</option>
								{state_options}
								</select>
							</fieldset>
						</div>
						<fieldset class="form-group">
							<label>{l_city}:</label>
							<select name="city" class="form-control">
							<option>{l_please_select}</option>
							{city_options}
							</select>
						</fieldset>
						<div class="row">
							<fieldset class="form-group col-md-6">
								<label>{l_zip_postal_code}:</label>
								<input class="form-control" type="text" name="zip" value="{zip}"/>
							</fieldset>
							<fieldset class="form-group col-md-6">
								<label>{l_tax_id}:</label>
								<input class="form-control" type="text" name="tax" value="{tax}"/>
							</fieldset>
						</div>
						<div class="row">
							<fieldset class="form-group col-md-6">
								<label>{l_password}:</label>
								<input type="password" name="join_password" value="" class="form-control"/>
							</fieldset>
							<fieldset class="form-group col-md-6">
								<label>{l_confirm_password}:</label>
								<input type="password" name="verify_password" value="" class="form-control"/>
							</fieldset>
						</div>

						<fieldset class="form-group">
							<div class="wrap_button">
								<button class="btn btn-primary btn_submit" type="submit">{l_save}</button>
								<div class="button_submit_instruction">{l_or_use_ctrl_s}</div>
							</div>
						</fieldset>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

{footer}